{% extends "base.html" %}

{% block title %}ë¡œê·¸ì¸{% endblock %}

{% block content %}
<div class="auth-container">
    <h2>ë¡œê·¸ì¸</h2>
    <p>X-Ray ì´ë¬¼ ê²€ì¶œ ì‹œìŠ¤í…œì„ ì´ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”.</p>

    <form method="POST" action="{{ url_for('login') }}" id="login-form" novalidate>
        <div class="form-group">
            <label for="userid">ì•„ì´ë””</label>
            <input type="text" id="userid" name="userid" value="{{ userid or '' }}" required>
            <!-- ğŸ‘‡ ì•„ì´ë”” í”¼ë“œë°± ë©”ì‹œì§€ div -->
            <div class="feedback-message"></div>
        </div>
        <div class="form-group">
            <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="password" name="password" required>
            <!-- ğŸ‘‡ ë¹„ë°€ë²ˆí˜¸ í”¼ë“œë°± ë©”ì‹œì§€ div -->
            <div class="feedback-message"></div>
        </div>
        <button type="submit" class="auth-btn">ë¡œê·¸ì¸</button>
    </form>
    <div class="auth-switch">
        <p>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="{{ url_for('register') }}">íšŒì›ê°€ì…</a></p>
    </div>
</div>

<script>
$(function() {
    // --- ì‹¤ì‹œê°„ í•„ìˆ˜ í•­ëª© ê²€ì‚¬ (focusout) ---
    $('#userid, #password').on('focusout', function() {
        const field = $(this);
        const feedback = field.siblings('.feedback-message');
        if (field.val() === '') {
            feedback.text('í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.').addClass('unavailable');
        } else {
            feedback.text('').removeClass('unavailable');
        }
    });

    // --- ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ ìµœì¢… ê²€ì‚¬ ---
    $('#login-form').on('submit', function(event) {
        let hasError = false;
        
        const useridField = $('#userid');
        const passwordField = $('#password');

        if (useridField.val() === '') {
            useridField.siblings('.feedback-message').text('ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.').addClass('unavailable');
            hasError = true;
        }
        if (passwordField.val() === '') {
            passwordField.siblings('.feedback-message').text('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.').addClass('unavailable');
            hasError = true;
        }

        if (hasError) {
            // ì„œë²„ë¡œ í¼ì´ ì œì¶œë˜ëŠ” ê²ƒì„ ë§‰ìŒ
            event.preventDefault();
        }
    });
});
</script>
{% endblock %}